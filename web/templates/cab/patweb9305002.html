<meta name="TemplateVersion" content="V11.03.02">
<meta name="TemplateHome" content="cab">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<!--        Sub-Frame Header Section       -->
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
Update Condition - %PATWEB93.05.002
</span>
<!--        Sub-Frame Details Sections     -->
<div id=PageBodySection>
<form name=PatCondPopup method=post style="margin:0" %PATWEB93.05.101 
<input type=hidden id=workdiag name=workdiag value="%PATWEB93.05.212">
<input type=hidden name=dummy id=dummy value="">
<input name="myChars" type="hidden"
  value="0" size="4" maxlength="4">
<input name="maxChars" type="hidden"
  value="0" size="4" maxlength="4">
<input name="myLines" type="hidden"
  value="0" size="4" maxlength="3">
<input name="maxLines" type="hidden"
  value="0" size="4" maxlength="3">

<table border=0 align=center width=100%>
<tr>
    <td class=DataLabel>Last Update</td>
    <td><input type=text class=readonly readonly size=20 name=patconup
               value="%PATWEB93.05.108"></td></tr>
<tr><td class=DataLabel>Condition </td>
    <td><select name=patconcd>
        <option value="   "></option>
        %PATWEB93.05.102
        </select>
</td></tr>
<tr><td class=DataLabel>Ambulatory Status</td>
    <td><select name=patconam>
        <option value="   "></option>
        %PATWEB93.05.107
        </select>
</td></tr>
<tr><td class=DataLabel> Visitors Allowed ?</td>
    <td><input name=patconva type=checkbox value=1>                   
    </td></tr>
<tr><td class=DataLabel> Phone Calls Allowed ?</td>
    <td><input name=patconpa type=checkbox value=1>                   
    </td></tr>
<tr><td class=DataLabel>%STANDARD.01.017.U2</td>
    <td><select name=ptmis038 title="">
        <option value="   "></option>
        %PATWEB93.05.109.2
        </select>
    </td></tr>
<tr><td class=DataLabel>Discharge Preparation Status</td>
    <td><select name=pmswo007 title="Discharge Preparation Status">
        <option value="   "></option>
        %PATWEB93.05.214.2
        </select>
    </td></tr>
<tr><td class=DataLabel>Expected Discharge Date</td>
    <td><input type=text size=12 name=pmswo005 id=pmswo005 tabindex=31
         class="Date" value="%PATWEB93.05.205" title="Expected Discharge Date">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(PatCondPopup.pmswo005);">
        Time
        <input type=text name=pmswo006 id=pmswo006 size=8
         title="Expected Discharge Time"
         value="%PATWEB93.05.213">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(PatCondPopup.pmswo005,
                                     PatCondPopup.pmswo006);">
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick="TimeLookupFrame(PatCondPopup.pmswo006);">
    </td></tr>
<tr><td class=DataLabel> Comments</td>
    <td><input name=patconds size=35 maxlength=35 value="%PATWEB93.05.103">
    </td></tr>

<tr>
        <td class="DataLabel">Discharge Coordinator</td>
        <td><input type=text size=10 maxlength=10 name=pmswo008 id=pmswo008
              onblur="ValidateHCP(18,0,
                                  PatCondPopup.pmswo008,
                                  PatCondPopup.doctnam1);"
             value="%PATWEB93.05.215.1"/>
            <input type="text" size="25" notab readonly class=Readonly
              name=doctnam1 id=doctnam1 value="%PATWEB93.05.215.2"/>
            <img src="../images/SearchIcon.gif" class=Icon
             onclick="HCPSearchFrame(PatCondPopup.pmswo008,
                                     PatCondPopup.doctnam1,0);" />
        <img src="../images/erase.gif" class=Icon
            onclick="clrFields(PatCondPopup.pmswo008,
                               PatCondPopup.doctnam1);" />
          <td></tr>

<tr><td>Expected Discharge Destination</td>
    <td><input type="text" size=10 maxlength=5 name=pmswo009 id=pmswo009
    title="Transfer Destination" value="%PATWEB93.05.216.1"
    onblur="validateTransSrc(pmswo009,dummy,trandesc);">
   <input type=text size=25 name=trandesc id=trandesc notab
     class=Readonly readonly
     value="%PATWEB93.05.216.2">
   <img src="../images/SearchIcon.gif" class=Icon
     onclick="TransferSourceFrame(pmswo009,trandesc)">
   <img src="../images/erase.gif" class=Icon
        onclick="clrFields(PatCondPopup.pmswo009,
                           PatCondPopup.trandesc);" />
   </td>
</tr>

<tr><td class=DataLabel>Working Diagnosis</td>
<td class=DataField colspan=3>
  <textarea name="wdcom001" id="wdcom001" cols="35" rows="3" wrap="hard"
   style="font-size:14px; line-height:17px; overflow-y:hidden"
   title="Working Diagnosis"
   onkeydown="LimitText(this,3,105)"
   onblur="TextareaBlurHandler(this);ValidateTextLimit(this);"></textarea>
</td></tr>

<tr><td align=center colspan=2>
<input type=submit value="Update" class="button">
<input type=button value="Cancel" class="button"
       onclick="DFrameCloseRefresh();">
</td></tr>
</table>

</form>
</div>
 
<script type="text/javascript">

// Load 'Working Diagnosis' text
var arrWorkingDiag = document.getElementById('workdiag').value.split(/\r?\n/);

document.getElementById('wdcom001').value =
  arrWorkingDiag[0] + "\n" + arrWorkingDiag[1] + "\n" + arrWorkingDiag[2];

if  ("%PATWEB93.05.106.1" == "1")
{
  document.PatCondPopup.patconva.checked="1";
}
if  ("%PATWEB93.05.106.2" == "1")
{
  document.PatCondPopup.patconpa.checked="1";
}

function checkFields() {
  if (validateMandatory(PatCondPopup)) {
    PatCondPopup.submit();
  }
}

function ValidateTextLimit(TextArea) {
  var maxLines = TextArea.rows + 0;
  var maxChars = (TextArea.cols + 0) * maxLines;

  var formatedtext = formateText(TextArea,TextArea.cols);

  TextArea.value = formatedtext;

  if (formatedtext.split(/\r?\n/).length > maxLines) {
    alert(TextArea.title + " - Max " + maxLines + " lines." +
          "\nPlease remove the extra line(s) to continue.");
    FocusDelay(TextArea);

    TextArea.onblur = null;  // clear to prevent infinite loop with alerts
    window.setTimeout(function () {
      TextArea.onblur = function() {
        TextareaBlurHandler(TextArea);
        ValidateTextLimit(TextArea);
      }
    },100);

    return;
  }
  else if (formatedtext.replace(/\r?\n/gm,"").length > maxChars) {
    alert(TextArea.title + " - Max " + maxChars + " characters." +
          "\nPlease remove the extra character(s) to continue.");
    FocusDelay(TextArea);

    TextArea.onblur = null;  // clear to prevent infinite loop with alerts
    window.setTimeout(function () {
      TextArea.onblur = function() {
        TextareaBlurHandler(TextArea);
        ValidateTextLimit(TextArea);
      }
    },100);

    return;
  }
}

</script>
