<meta name="TemplateVersion" content="V11.03.03">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>
<script type="text/javascript" src="../js/Comp_MV.js"> </script>

<!-- Motor Vehicle -->

<style type=text/css>

#SelectHeading{
position: absolute;
visibility: hidden;
top: 120px;
left: 320px;
height: 20px;
width: 350px;
overflow: none;
}

#SelectLocation{
position: absolute;
visibility: hidden;
top: 140px;
left: 320px;
height: 150px;
width: 350px;
overflow: auto;
}

</style>

<script type="text/javascript">

function SubmitClaim() {
  ReturnPath=GetCookieData('InvoiceReturn');
  if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
     document.cookie="InvoiceReturn=;"            // clear cookie
     document.UpdateForm.redirect.value=ReturnPath; // return to invoice scr
 } else if(document.UpdateForm.mvmedrec.value == "1") {
     document.UpdateForm.redirect.value="mrtweb01.pbl?reportno=09&template=004"
     + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+")
 } else if (document.UpdateForm.mhadmflg.value == "1") {
     document.UpdateForm.redirect.value="patweb89.pbl?reportno=07&template=001"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
 } else {
     document.UpdateForm.redirect.value="patweb98.pbl?reportno=01&template=043"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
 }

 if(validateMandatory(UpdateForm)){
  if(document.UpdateForm.d_pmext138.checked==true) {
   document.UpdateForm.pmext138.value="1"
  } else {
   document.UpdateForm.pmext138.value="0";
  }
  if(document.UpdateForm.d_ffaddr.checked==true) {
   document.UpdateForm.pmext080.value=document.UpdateForm.d_pmext080.value;
  } else {
   document.UpdateForm.pmext080.value="";
  }

  UpdateForm.updatety.value="5";
  document.UpdateForm.submit();
 }

}

</script>
%START.OF.PAGE
<body onLoad="PageLoad(event);GetDefaultIns();">
<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>
<div id=PageBodySection>
<form name=UpdateForm action="patweb89.pbl" method=post
 onsubmit='return validateMandatory(this); '>
  <input type=hidden name=reportno value="02">
  <input type=hidden name=template value="342">
  <input type=hidden name=updatety value="5">
  <input type=hidden name=urnumber value="%PATWEB89.01.003">
  <input type=hidden name=pmext017 value="%PATWEB89.01.003">
  <input type=hidden name=pmext018 value="%PATWEB89.01.102">
  <input type=hidden name=admissno value="%PATWEB89.01.101">
  <input type=hidden name=pmext001 value="%PATWEB89.01.101">
  <input type=hidden name=pmext002 value="%PATWEB89.01.126.1">
  <input type=hidden name=claimcod value="%PATWEB89.01.126.3">
  <input type=hidden name=pmext080 value="%PATWEB89.01.384.080">
  <input type=hidden name=pmext138 value="%PATWEB89.01.384.099.040">
  <input type=hidden name=statncod value="%PATWEB89.01.999.004.0">
  <input type=hidden name=statndes value="%PATWEB89.01.999.004.1">
  <input type=hidden name=addeflag value="%PATWEB89.01.999.005">
  <input type=hidden name=finanelc value="%PATWEB89.01.126.1">
  <input type=hidden name=nextpage value=2>
  <input type=hidden name=mvmedrec value="%PATWEB89.01.902">
  <input type=hidden name=mhadmflg value="%PATWEB89.01.999.008">
  <input type=hidden name=claimtyp value="X">
  <input type=hidden name=returncd value="%PATWEB89.01.933">
  <input type=hidden name=redirect value="%PATWEB89.01.001.patweb98.01.001">
  <input type=hidden name=faxnumbr value=" ">
  <input type=hidden name=ccvistyp value="%PATWEB89.01.205">
  <input type=hidden name=ccvissta value="%PATWEB89.01.924">
  <input type=hidden name=pmext049 value="%PATWEB89.01.999.126">

<table align=center width=100% border=1 cellspacing=0 cellpadding=2>
<tr><td class=HeadingCell align=center>
    Motor Vehicle Details</td></tr>
<tr><td>
    <table width=100% border=0>

<tr><td class=DataLabel>Medicare Number</td>
    <td class="DataField">%PATWEB89.01.027 %PATWEB89.01.649</td>
    <td class=DataLabel>Solicitor Details</td>
    <td><input type="text" size="35" maxlength="35" name=pmext065 tabindex=13
      value="%PATWEB89.01.384.065" title="Solicitor Address 1">
    </td>
</tr>

<tr><td class=DataLabel>Claim Number</td>
    <td><input type="text" size="21" name="pmext013" 
         title="Claim Number" tabindex=1 value="%PATWEB89.01.384.013">
         <img src="../images/SearchIcon.gif" class=Icon
         onclick="lookUpMVI();">
    </td>
    <td class=DataLabel>&nbsp;</td>
    <td><input type="text" size="35" maxlength="35" name=pmext066 tabindex=14
      value="%PATWEB89.01.384.066" title="Solicitor Address 2">
    </td>
</tr>

<tr><td class=DataLabel>Alternate Election</td>
    <td><select name="pmext140" title="Alternate Election" tabindex=2
         class=Mandatory value="%PATWEB89.01.384.099.042.1">
        <option> </option>
         %PATWEB89.01.384.099.042.9.1.12.1.A
        </select></td>
    <td class=DataLabel>&nbsp;<br></td>
    <td><input type="text" size="35" maxlength="35" name=pmext067 tabindex=15
      value="%PATWEB89.01.384.067" title="Solicitor Address 3"
      onblur="valSolicitorPostCode();">
    </td>
</tr>

<tr><td class=DataLabel>Settled MVIT</td>
    <td><input type=checkbox tabindex=3
         title="Settled MVIT" name="d_pmext138"></td>
    <td class=DataLabel>State<br></td>
    <td><input type="text" size="35" maxlength="35" name=pmext068 tabindex=16
      value="%PATWEB89.01.384.068" title="Solicitor Address 4">
    </td>
<tr>

<tr><td class=DataLabel>Date of Accident</td>
    <td><input type=text name=pmext010 tabindex=4 class="PastDate Mandatory"
     title="Date of Accident" Size=12 value="%PATWEB89.01.384.010"
     onblur="valDateSentICWA()">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.pmext010>
    </td>
    <td class=DataLabel>&nbsp;</td>
    <td><input type="text" size="8" maxlength="8" name=pmext069 tabindex=17
      value="%PATWEB89.01.384.069" title="Solicitor Postcode"
      onchange="SetPostCode02();">
    </td>
</tr>

<tr><td class=DataLabel>Accident Type</td>
    <td><select name="pmext139" title="Accident Type" tabindex=5
         class=Mandatory value="%PATWEB89.01.384.099.041.1" >
        <option> </option>
         %PATWEB89.01.384.099.041.2
        </select></td>
   <td class=DataLabel>Solicitor Contact Name</td>
    <td><input type="text" size="55" maxlength="50" name="pmext071" tabindex=18
        value="%PATWEB89.01.384.071" title="Solicitor Contact Name"></td>
</tr>

<tr><td class=DataLabel>Acc.Location</td>
    <td><input type="text" size="60" maxlength="50" tabindex=6 class=Mandatory
         title="Accident Location" name="pmext095"
         value="%PATWEB89.01.384.087"></td>
    <td class=DataLabel>Solicitor Contact Phone</td>
    <td><input type="text" size="25" maxlength="20" name="pmext070" tabindex=19
        value="%PATWEB89.01.384.070" title="Solicitor Contact Phone"></td>
</tr>


<tr><td class=DataLabel>Insurance Company</td>
    <td><select name="pmext012" title="Insurance Company" tabindex=7
         value="%PATWEB89.01.384.012.0" id="pmext012"
         onchange="DisplayIns();">
        <option> </option>
         %PATWEB89.01.999.011.0 
        </select></td>
    <td class=DataLabel>Other Address</td>
    <td><input type=checkbox name=d_ffaddr tabindex=20
     title="Other Address"
     onclick="DispFFAddr();BillMand();"></td>
</tr>

<tr><td>&nbsp;</td>
    <td><input type="text" size="35" maxlength="35" name=insadd1
        class=ReadOnly readonly title="Insurance Address"></td>
    <td><div id=LContactAdd1></div></td>
    <td><div id=FContactAdd1></div></td></tr>

<tr><td>&nbsp;</td>
    <td><input type="text" size="35" maxlength="35" name=insadd2
        class=ReadOnly readonly title="Insurance Address"></td>
    <td><div id=LContactAdd2></div></td>
    <td><div id=FContactAdd2></div></td></tr>

<tr><td>&nbsp;</td>
    <td><input type="text" size="35" maxlength="35" name=insadd3
        class=ReadOnly readonly title="Insurance Address"></td>
    <td><div id=LContactAdd3></div></td>
    <td><div id=FContactAdd3></div></td></tr>

<tr><td>&nbsp;</td>
    <td><input type="text" size="35" maxlength="35" name=insadd4
        class=ReadOnly readonly title="Insurance Suburb"></td>
    <td><div id=LContactAdd4></div></td>
    <td><div id=FContactAdd4></div></td></tr>

<tr><td>&nbsp;</td>
    <td><input type="text" size="8" maxlength="8" name=inspcode
        class=ReadOnly readonly title="Insurance Postcode"></td>
    <td><div id=LContactPCode></div></td>
    <td><div id=FContactPCode></div></td></tr>

<tr><td>Contact Name</td>
    <td><input type="text" size="50" maxlength="50" name=inscname
        class=ReadOnly readonly title="Insurance Contact Name"></td>
    <td><div id=LContactPName></div></td>
    <td><div id=FContactPName></div></td></tr>

<tr><td>Contact Phone</td>
    <td><input type="text" size="20" maxlength="20" name=insctelp
        class=ReadOnly readonly title="Insurance Contact Phone"></td>
    <td><div id=LContactPhone></div></td>
    <td><div id=FContactPhone></div></td></tr>

<tr><td class=DataLabel>Date Sent to ICWA</td>
    <td><input type=text name=pmext039 tabindex=4 class="PastDate"
     title="Date Sent to ICWA" Size=12 value="%PATWEB89.01.384.039" 
     onblur="valDateSentICWA()">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.pmext039></td>
    <td class=DataLabel>Comments</td>
    <td><input type="text" size="55" maxlength="50" name=pmext059 tabindex=30
        value="%PATWEB89.01.384.059" title="Comments"></td>
</tr>

<tr><td class=DataLabel>Date ICWA Responded</td>
    <td><input type=text name=pmext040 tabindex=4 class="PastDate"
     title="Date ICWA Responded" Size=12 value="%PATWEB89.01.384.040" 
     onblur="valDateRespICWA()">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.pmext040></td>
    <td class=DataLabel>&nbsp;</td>
    <td><input type="text" size="55" maxlength="50" name=pmext060 tabindex=31
        value="%PATWEB89.01.384.060" title="Comments"></td>
</tr>

<tr><td class=DataLabel>Status</td>
    <td><select name=pmext055 title="Status" tabindex=34 class="Mandatory"
         onChange="valStatus()">
        %STANDARD.01.021.Vh
        </select></td>
    <td class=DataLabel>&nbsp;</td>
    <td><input type="text" size="55" maxlength="50" name=pmext061 tabindex=32
         value="%PATWEB89.01.384.061" title="Comments"></td>
</tr>

</table>
</td></tr>
</table>

<table cellspacing=0 cellpadding=1 border=0 align=center width=100%>

<tr><td class=DataLabel width=15%>Print %STANDARD.01.017.CL Form</td>
    <td><input type=checkbox name=prntform value="1" tabindex=33
         onclick="SetPrinter();">
    </td>
    <td class=DataLabel>Stationery Code</td>
    <td><input type=text name=d_statncod size=30
     class=ReadOnly readonly></td>
    <td class=DataLabel>Printer</td>
    <td><select name=schdprnt title="Printer" tabindex=34 disabled>
        <option></option>
         %STANDARD.01.001.ELECTFRM.0X
        </select>
    </td>
</tr>
<tr><td class=DataLabel width=15%>Print Alternate %STANDARD.01.017.CL Form</td>
    <td><input type=checkbox name=prtform2 value="1" tabindex=33
         onclick="SetPrinterAlt();">
    </td>
    <td class=DataLabel>Stationery Code</td>
    <td><select name=schform2 title="Form" tabindex=34 disabled>
        <option></option>
        %STANDARD.01.020.  3
        </td>
    <td class=DataLabel>Printer</td>
    <td><select name=schdprt2 title="Printer" tabindex=34 disabled>
        <option></option>
         %STANDARD.01.001.ELECTFRM.0X
        </select>
    </td>
</tr>


</table>

<table cellspacing=0 cellpadding=1 border=0 align=center width=100%>
<tr><td colspan=4 align=center>
    <input type=button value="Update" tabindex=35 class="button" 
    id="pat89sub" onclick="tempDisable(this);SubmitClaim();">
    <input type=button value="Cancel" tabindex=36 
     onclick="SetCancel();" class="button">
</td></tr>
</table>
</form>
<div id=SelectHeading></div>
<div id=SelectLocation></div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<span id=LFAdd1 style="display:none">
     Address
</span>
<span id=LFAdd3 style="display:none">
     Suburb
</span>
<span id=LFAdd4 style="display:none">
     State
</span>
<span id=LFPostCode style="display:none">
     Post Code
</span>
<span id=LFCName style="display:none">
     Contact Name
</span>
<span id=LFCPhone style="display:none">
     Contact Phone
</span>

<span id=FFAdd1 style="display:none">
       <input type="text" size="35" maxlength="35" name=d_pmext080 tabindex=21
      class=Mandatory value="%PATWEB89.01.384.080" title="Free format Address">
</span>

<span id=FFAdd2 style="display:none">
      <input type="text" size="35" maxlength="35" name=pmext081 tabindex=22
      value="%PATWEB89.01.384.081" title="Free format Address">
</span>

<span id=FFAdd3 style="display:none">
      <input type="text" size="35" maxlength="35" name=pmext082 tabindex=23
      value="%PATWEB89.01.384.082"
      onblur="valPostCode();">
</span>

<span id=FFAdd4 style="display:none">
      <input type="text" size="35" maxlength="35" name=pmext083 tabindex=24
      value="%PATWEB89.01.384.083" title="Free format Address">
</span>

<span id=FFPCode style="display:none">
      <input type="text" size="8" maxlength="8" name=pmext084 tabindex=25
      value="%PATWEB89.01.384.084" title="Free format Address"
      onchange="SetPostCode03();">
</span>

<span id=FFCName style="display:none">
      <input type="text" size="50" maxlength="50" name=pmext085 tabindex=26
      value="%PATWEB89.01.384.085" title="Free format Contact Name">
</span>

<span id=FFCPhone style="display:none">
      <input type="text" size="20" maxlength="20" name=pmext086 tabindex=27
      value="%PATWEB89.01.384.086" title="Free format Contact Phone">
</span>


<script type="text/javascript">

if(document.UpdateForm.pmext138.value=="1"){
   document.UpdateForm.d_pmext138.checked=true;
 } else {
   document.UpdateForm.d_pmext138.checked=false;
 }

 address="%PATWEB89.01.384.080";
 if(!isWhitespace(address)) {
   document.UpdateForm.d_ffaddr.checked=true;
 } else {
   document.UpdateForm.d_ffaddr.checked=false;
 }

 ffadd="%PATWEB89.01.384.080";
  if (!isWhitespace(ffadd)) {
    DispFFAddr();
  }
 mandfield=document.UpdateForm.claimcod.value.substr(34,1);
  if (mandfield!="B") {
     if(isWhitespace(address)) {
       document.UpdateForm.pmext012.className="Mandatory";
     }
  }

function SetCancel() {
 if(!confirm("Warning: Motor Vehicle data will not be updated!\n" + 
             "Ok to Continue ?")){
   return;
 } 
 ReturnPath=GetCookieData('InvoiceReturn');
 if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
   document.cookie="InvoiceReturn=;" // clear cookie
   var link=ReturnPath;              // return to invoice scr
 }
 else {
   var urnumber ="%PATWEB89.01.003";
   var admissno ="%PATWEB89.01.101";
   var link = "patweb98.pbl?reportno=01&template=001&urnumber="+urnumber
             +"&admissno="+admissno;
 }
 location.href= link;
}

function valDateSentICWA() {
  var dateAcc = SetDateYYYYMMDD(document.UpdateForm.pmext010.value);
  var dateSentIC = SetDateYYYYMMDD(document.UpdateForm.pmext039.value);
  var dateRespIC = SetDateYYYYMMDD(document.UpdateForm.pmext040.value);
  if (isWhitespace(dateSentIC)) return; 
  if (dateSentIC < dateAcc) {
    alert("'Date Sent to ICWA' cannot be before 'Date of Accident'.");
    document.UpdateForm.pmext039.value = "";
    return;
  }
  if (!isWhitespace(dateRespIC) && dateRespIC < dateSentIC) {
    alert("'Date ICWA Responded' cannot be before 'Date Sent to ICWA'.");
    document.UpdateForm.pmext040.value = "";
    return;
  }
}

function valDateRespICWA() {
  var dateSentIC = SetDateYYYYMMDD(document.UpdateForm.pmext039.value);
  var dateRespIC = SetDateYYYYMMDD(document.UpdateForm.pmext040.value);
  if (isWhitespace(dateSentIC)) {
    alert("'Date Sent to ICWA' cannot be blank.");
    document.UpdateForm.pmext039.focus();
    return;
  } else if (dateRespIC < dateSentIC) {
    alert("'Date ICWA Responded' cannot be before 'Date Sent to ICWA'.");
    document.UpdateForm.pmext040.value = "";
    return;
  }
}

function valStatus() {
  var statusInc = document.UpdateForm.pmext055.value.substr(3,1);
  var dateRespIC = document.UpdateForm.pmext040.value;
  var visType = document.UpdateForm.ccvistyp.value;
  var visStat = document.UpdateForm.ccvissta.value;

  if (statusInc == "P") {
    if (isWhitespace(dateRespIC)) {
      alert("'Date ICWA Responded' cannot be blank.");
      focusOnCL("P");
      return;
    }
  }

  if (statusInc == "A") {
    if (isWhitespace(dateRespIC) && visType !== 3) {
      alert("'Date ICWA Responded' cannot be blank.");
      document.UpdateForm.pmext040.focus();
      return;
    } else if (visType !== 3) {
      alert("Patient must have an inpatient visit type.");
      focusOnCL("P");
      return;
    }
  }

  if (statusInc == "D") {
    if (isWhitespace(dateRespIC) && visType !== "3" && visStat !== "3") {
      alert("'Date ICWA Responded' cannot be blank.");
      document.UpdateForm.pmext040.focus();
      return;
    } else if (visType !== "3") {
      alert("Patient must have a visit type of Inpatient.");
      focusOnCL("P");
      return;
    } else if (visStat !== "3") {
      alert("Patient must be discharged.");
      focusOnCL("P");
      return;
    }
  }
}

function focusOnCL(clCode) {
  selectedCL="%PATWEB71.01.484.055.3"
  if (!isWhitespace(selectedCL)) {
    clCode = selectedCL.substr(3, 1);
  }
  for (var i = 0; i < document.UpdateForm.pmext055.options.length; i++) {
    if (document.UpdateForm.pmext055.options[i].value.substr(3, 1) == clCode) {
      document.UpdateForm.pmext055.value =
      document.UpdateForm.pmext055.options[i].value;
    }
  }
}

focusOnCL("P");
</script>
